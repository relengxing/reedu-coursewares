<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±½è½¦ä¸Šä¸‹å¡é—®é¢˜ - äº¤äº’å¼åŠ¨ç”»</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            color: #333;
            line-height: 1.6;
            font-size: 24px;
            margin: 0;
            padding: 0;
        }

        section {
            width: 100%;
            padding: 40px 20px;
            box-sizing: border-box;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 2rem;
            opacity: 0.9;
        }

        .content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
        }

        .card h2 {
            color: #2196F3;
            margin-bottom: 30px;
            font-size: 2.5rem;
            border-bottom: 3px solid #2196F3;
            padding-bottom: 15px;
        }

        .problem-text {
            background: #f8f9ff;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 6px solid #2196F3;
            font-size: 1.2em;
        }

        .problem-text h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .problem-text p {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .simulation-area {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .animation-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .animation-title {
            text-align: center;
            color: #2196F3;
            margin-bottom: 30px;
            font-weight: bold;
            font-size: 1.8rem;
        }

        .hill-scene {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 3px solid #3498db;
        }

        .sky {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 70%;
            background: linear-gradient(to bottom, #1e90ff, #87ceeb);
        }

        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(to top, #8bc34a, #7cb342);
        }

        .hill-svg-container {
            position: absolute;
            bottom: 30%;
            width: 100%;
            height: 200px;
        }

        .hill-svg {
            width: 100%;
            height: 100%;
        }

        .car {
            position: absolute;
            width: 80px;
            height: 40px;
            background: #e74c3c;
            border-radius: 10px 10px 0 0;
            transition: all 0.05s linear;
            z-index: 10;
            transform-origin: center center;
            /* ç§»é™¤ä¹‹å‰çš„ bottom å®šä½ï¼Œæ”¹ç”¨ top å’Œ left */
            top: 0;
            left: 0;
        }

        .car-body {
            position: absolute;
            width: 100%;
            height: 70%;
            background: #e74c3c;
            border-radius: 10px 10px 0 0;
        }

        .car-top {
            position: absolute;
            top: 8px;
            left: 10px;
            width: 40px;
            height: 20px;
            background: #3498db;
            border-radius: 5px;
        }

        .wheel {
            position: absolute;
            bottom: -8px;
            width: 16px;
            height: 16px;
            background: #2c3e50;
            border-radius: 50%;
            border: 2px solid #7f8c8d;
        }

        .wheel.front {
            left: 15px;
        }

        .wheel.back {
            right: 15px;
        }

        .info-panel {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .info-card {
            background: #3498db;
            color: white;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .info-value {
            font-size: 2rem;
            font-weight: bold;
            margin-top: 5px;
        }

        .controls-panel {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 1.2rem;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            flex: 1;
            height: 10px;
            -webkit-appearance: none;
            appearance: none;
            background: #ddd;
            border-radius: 5px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #3498db;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .slider-value {
            min-width: 60px;
            text-align: center;
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.2rem;
        }

        .time-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }

        .time-rate-control {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .time-rate-buttons {
            display: flex;
            gap: 10px;
        }

        .time-rate-btn {
            padding: 8px 15px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .time-rate-btn:hover {
            background: #27ae60;
        }

        .time-rate-btn.active {
            background: #e74c3c;
        }

        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            padding: 15px 30px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.3rem;
            transition: all 0.3s;
            flex: 1;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .calculation-area {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .step {
            margin: 20px 0;
            padding: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #3498db;
            font-size: 1.2em;
        }

        .step-number {
            display: inline-block;
            width: 50px;
            height: 50px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 50px;
            margin-right: 15px;
            font-weight: bold;
            font-size: 1.5rem;
        }

        .equation {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            overflow-x: auto;
            font-size: 1.8rem;
            border: 3px dashed #2196F3;
        }

        .final-answer {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            border-left: 5px solid #4caf50;
        }

        .final-answer h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }

        .diagram-line {
            stroke: #e74c3c;
            stroke-width: 2;
            stroke-dasharray: 5, 5;
        }

        .diagram-text {
            fill: #2c3e50;
            font-size: 18px;
            font-weight: bold;
        }

        .formula-text {
            fill: #2196F3;
            font-size: 18px;
            font-weight: bold;
            font-family: 'Microsoft YaHei', 'Times New Roman', serif;
        }

        .formula-background {
            fill: rgba(255, 255, 255, 0.9);
            stroke: #2196F3;
            stroke-width: 2;
            rx: 5;
        }

        .path-marker {
            fill: rgba(228, 191, 69, 0.84);
            font-size: 50px;
            font-weight: bold;
        }

        .collapsible-section {
            margin-top: 20px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }

        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 8px;
            margin-bottom: 15px;
            transition: background 0.3s;
        }

        .collapsible-header:hover {
            background: #e8e8e8;
        }

        .collapsible-header h3 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.5rem;
        }

        .collapsible-icon {
            font-size: 1.2rem;
            transition: transform 0.3s;
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .collapsible-content.expanded {
            max-height: 1000px;
            transition: max-height 0.3s ease-in;
        }

        .preset-selector {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .preset-buttons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .preset-btn {
            flex: 1;
            padding: 15px 30px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.3rem;
            transition: all 0.3s;
        }

        .preset-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .preset-btn.active {
            background: #e74c3c;
        }


        @media (max-width: 768px) {
            .simulation-area {
                min-width: 100%;
            }

            .info-panel {
                grid-template-columns: repeat(2, 1fr);
            }

            .controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <section id="section1" data-section="1">
<div class="container">
            <div class="header">
                <h1>ğŸš— æ±½è½¦ä¸Šä¸‹å¡é—®é¢˜</h1>
                <p>ç”¨åŠ¨ç”»ç†è§£äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„çš„å®é™…åº”ç”¨</p>
            </div>

            <div class="card">
                <h2>ğŸ“ é¢˜ç›®å±•ç¤º</h2>
                <div class="problem-text">
<!--                    <h3>æ±½è½¦ä¸Šä¸‹å¡é—®é¢˜</h3>-->
                    <p><strong>é¢˜ç›®ï¼š</strong>ä¸€è¾†æ±½è½¦åœ¨å±±åŒºå…¬è·¯ä¸Šè¡Œé©¶ï¼ˆ<span style="color: #E65100; font-style: italic;">åœ°ç†çŸ¥è¯†ï¼šå±±åŒºåœ°å½¢å¤æ‚ï¼Œé“è·¯å¡åº¦å½±å“è½¦é€Ÿ</span>ï¼‰ï¼Œåœ¨ä¸Šä¸‹å¡è¿‡ç¨‹ä¸­ï¼Œé€Ÿåº¦ä¼šå‘ç”Ÿå˜åŒ–ï¼š</p>
                    <ul>
                        <li>ä¸Šå¡æ—¶ï¼Œé€Ÿåº¦ä¸º \( 28 \, \text{km/h} \)ï¼ˆ<span style="color: #E65100; font-style: italic;">ä¸Šå¡éœ€è¦å…‹æœé‡åŠ›ï¼Œé€Ÿåº¦è¾ƒæ…¢</span>ï¼‰</li>
                        <li>ä¸‹å¡æ—¶ï¼Œé€Ÿåº¦ä¸º \( 42 \, \text{km/h} \)ï¼ˆ<span style="color: #E65100; font-style: italic;">é‡åŠ›å¸®åŠ©å‰è¿›ï¼Œé€Ÿåº¦è¾ƒå¿«</span>ï¼‰</li>
                        <li>ä»ç”²åœ°åˆ°ä¹™åœ°ç”¨äº† 4 å°æ—¶ 30 åˆ†é’Ÿ</li>
                        <li>è¿”å›æ—¶ç”¨äº† 4 å°æ—¶ 40 åˆ†é’Ÿ</li>
                    </ul>
                    <p><strong>é—®é¢˜ï¼š</strong>ä»ç”²åœ°åˆ°ä¹™åœ°çš„ä¸Šå¡è·¯å’Œä¸‹å¡è·¯å„æ˜¯å¤šå°‘åƒç±³ï¼Ÿ</p>
                    <p style="margin-top: 15px; font-size: 0.95em; color: #666; font-style: italic;">ğŸ’¡ åœ°ç†åº”ç”¨ï¼šæˆ‘å›½å±±åŒºå…¬è·¯ï¼ˆå¦‚å·è—å…¬è·¯ï¼‰è®¾è®¡æ—¶ï¼Œå·¥ç¨‹å¸ˆéœ€è¦è€ƒè™‘å¡åº¦å¯¹è½¦é€Ÿçš„å½±å“ï¼Œç¡®ä¿è¡Œè½¦å®‰å…¨ã€‚é“è·¯å¡åº¦é€šå¸¸ç”¨ç™¾åˆ†æ¯”è¡¨ç¤ºï¼Œå¦‚5%è¡¨ç¤ºæ¯100ç±³ä¸Šå‡5ç±³ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <section id="section2" data-section="2">
<!--        <div class="container">-->
            <div class="card">
                <h2>ğŸ¬ ä¸Šä¸‹å¡åŠ¨ç”»æ¼”ç¤º</h2>
                <div class="animation-container">
<!--                    <div class="animation-title">åˆ†æ­¥å±•ç¤ºæ±½è½¦é€šè¿‡ä¸Šä¸‹å¡çš„å®Œæ•´è¿‡ç¨‹</div>-->
                    <div class="hill-scene">
                    <div class="sky"></div>
                    <div class="hill-svg-container">
                        <svg class="hill-svg" viewBox="0 0 1000 200" preserveAspectRatio="none">
                            <!-- å±±å¡è·¯å¾„ -->
                            <path id="hillPath" d="M 100,200 L 500,50 L 900,200" fill="#795548"/>
                            <!-- é“è·¯è·¯å¾„ -->
                            <path id="roadPath" d="M 100,200 L 500,50 L 900,200" fill="#555" stroke="none"/>
                            <!-- è·¯å¾„æ ‡è®° -->
                            <circle cx="100" cy="200" r="5" fill="#e74c3c"/>
                            <circle cx="500" cy="50" r="5" fill="#e74c3c"/>
                            <circle cx="900" cy="200" r="5" fill="#e74c3c"/>
                            <text x="100" y="190" class="path-marker" text-anchor="middle">ç”²åœ°</text>
                            <text x="500" y="40" class="path-marker" text-anchor="middle">æœ€é«˜ç‚¹</text>
                            <text x="900" y="190" class="path-marker" text-anchor="middle">ä¹™åœ°</text>

                            <!-- çº¿æ®µå›¾å›¾å±‚ -->
                            <g id="diagramOverlay">
                                <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptæ·»åŠ çº¿æ®µ -->
                            </g>
                        </svg>
                    </div>
                    <div class="ground"></div>

                    <!-- æ±½è½¦ -->
                    <div class="car" id="car">
                        <div class="car-body"></div>
                        <div class="car-top"></div>
                        <div class="wheel front"></div>
                        <div class="wheel back"></div>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="info-card">
                        <div>å½“å‰ä½ç½®</div>
                        <div class="info-value" id="position">èµ·ç‚¹</div>
                    </div>
                    <div class="info-card">
                        <div>å½“å‰é€Ÿåº¦</div>
                        <div class="info-value" id="speed">0 km/h</div>
                    </div>
                    <div class="info-card">
                        <div>å·²ç”¨æ—¶é—´</div>
                        <div class="info-value" id="time">0 å°æ—¶</div>
                    </div>
                    <div class="info-card">
                        <div>è¡Œé©¶è·ç¦»</div>
                        <div class="info-value" id="distance">0 km</div>
                    </div>
                </div>

<!--                <div class="controls-panel">-->
<!--                    <h2>æ§åˆ¶é¢æ¿</h2>-->
                    <div class="preset-buttons">
                        <button class="preset-btn active" id="presetAtoB" data-preset="atob">ç”²åœ°åˆ°ä¹™åœ°</button>
                        <button class="preset-btn" id="presetBtoA" data-preset="btoa">ä¹™åœ°åˆ°ç”²åœ°</button>
                    </div>
                    <div class="buttons">
                        <button id="startBtn">å¼€å§‹æ¨¡æ‹Ÿ</button>
                        <button id="pauseBtn" disabled>æš‚åœ</button>
                        <button id="resetBtn">é‡ç½®</button>
                        <button id="showFormulaBtn">æ˜¾ç¤ºæ•°å­¦å…³ç³»</button>
                    </div>

                    <div class="collapsible-section">

                        <div class="collapsible-header" id="distanceHeader">
                            <h3>è‡ªå®šä¹‰å‚æ•°è®¾ç½®</h3>
                            <span class="collapsible-icon" id="distanceIcon">â–¼</span>
                        </div>

                        <div class="collapsible-content" id="distanceContent">
                            <div class="controls">
                                <div class="control-group">
                                    <div class="control-title">ä¸Šå¡é€Ÿåº¦ (km/h)</div>
                                    <div class="slider-container">
                                        <input type="range" min="10" max="50" value="28" class="slider" id="uphillSpeed">
                                        <span class="slider-value" id="uphillSpeedValue">28</span>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-title">ä¸‹å¡é€Ÿåº¦ (km/h)</div>
                                    <div class="slider-container">
                                        <input type="range" min="10" max="50" value="42" class="slider" id="downhillSpeed">
                                        <span class="slider-value" id="downhillSpeedValue">42</span>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-title">ä¸Šå¡è·ç¦» (km)</div>
                                    <div class="slider-container">
                                        <input type="range" min="10" max="100" value="70" class="slider" id="uphillDistance">
                                        <span class="slider-value" id="uphillDistanceValue">70</span>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-title">ä¸‹å¡è·ç¦» (km)</div>
                                    <div class="slider-container">
                                        <input type="range" min="10" max="100" value="84" class="slider" id="downhillDistance">
                                        <span class="slider-value" id="downhillDistanceValue">84</span>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-title">æ—¶é—´å€ç‡</div>
                                    <div class="slider-container">
                                        <input type="range" min="1" max="2000" value="2000" class="slider" id="timeRate">
                                        <span class="slider-value" id="timeRateValue">2000x</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
<!--                </div>-->
<!--            </div>-->
        </div>
    </section>

    <section id="section3" data-section="3">
        <div class="container">
            <div class="card">
                <h2>ğŸ“ å»ºç«‹äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„</h2>
        <div class="step">
            <span class="step-number">1</span>
            <strong>è®¾æœªçŸ¥æ•°</strong>
            <p>è®¾ä»ç”²åœ°åˆ°ä¹™åœ°çš„ä¸Šå¡è·¯ä¸º \( x \) åƒç±³ï¼Œä¸‹å¡è·¯ä¸º \( y \) åƒç±³ã€‚</p>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>å»ºç«‹æ–¹ç¨‹</strong>
            <p>ä»ç”²åœ°åˆ°ä¹™åœ°ï¼šä¸Šå¡æ—¶é—´ \( \frac{x}{28} \) å°æ—¶ï¼Œä¸‹å¡æ—¶é—´ \( \frac{y}{42} \) å°æ—¶</p>
            <div class="equation">
                \[ \frac{x}{28} + \frac{y}{42} = 4.5 \]
            </div>

            <p>ä»ä¹™åœ°åˆ°ç”²åœ°ï¼šä¸Šå¡æ—¶é—´ \( \frac{y}{28} \) å°æ—¶ï¼Œä¸‹å¡æ—¶é—´ \( \frac{x}{42} \) å°æ—¶</p>
            <div class="equation">
                \[ \frac{y}{28} + \frac{x}{42} = \frac{14}{3} \]
            </div>
        </div>
            </div>
        </div>
    </section>

    <section id="section4" data-section="4">
        <div class="container">
            <div class="card">
                <h2>ğŸ§® æ±‚è§£äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„</h2>
        <div class="step">
            <span class="step-number">3</span>
            <strong>è§£æ–¹ç¨‹ç»„</strong>
            <p>åŒ–ç®€æ–¹ç¨‹ç»„ï¼š</p>
            <div class="equation">
                \[
                \begin{cases}
                3x + 2y = 378 \\
                2x + 3y = 392
                \end{cases}
                \]
            </div>

            <p>è§£å¾—ï¼š</p>
            <div class="equation">
                \[ x = 70, \quad y = 84 \]
            </div>
        </div>
    </div>
</div>
    </section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // è·å–DOMå…ƒç´ 
        const car = document.getElementById('car');
        const hillPath = document.getElementById('hillPath');
        const diagramOverlay = document.getElementById('diagramOverlay');
        const positionElement = document.getElementById('position');
        const speedElement = document.getElementById('speed');
        const timeElement = document.getElementById('time');
        const distanceElement = document.getElementById('distance');

        const uphillSpeedSlider = document.getElementById('uphillSpeed');
        const downhillSpeedSlider = document.getElementById('downhillSpeed');
        const uphillDistanceSlider = document.getElementById('uphillDistance');
        const downhillDistanceSlider = document.getElementById('downhillDistance');
        const timeRateSlider = document.getElementById('timeRate');

        const uphillSpeedValue = document.getElementById('uphillSpeedValue');
        const downhillSpeedValue = document.getElementById('downhillSpeedValue');
        const uphillDistanceValue = document.getElementById('uphillDistanceValue');
        const downhillDistanceValue = document.getElementById('downhillDistanceValue');
        const timeRateValue = document.getElementById('timeRateValue');

        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const showFormulaBtn = document.getElementById('showFormulaBtn');

        // å¯æŠ˜å åŒºåŸŸç›¸å…³å…ƒç´ 
        const distanceHeader = document.getElementById('distanceHeader');
        const distanceContent = document.getElementById('distanceContent');
        const distanceIcon = document.getElementById('distanceIcon');
        const presetAtoB = document.getElementById('presetAtoB');
        const presetBtoA = document.getElementById('presetBtoA');

        // çŠ¶æ€å˜é‡
        let animationId = null;
        let isAnimating = false;
        let isPaused = false;
        let lastTimestamp = 0;
        let currentPosition = 0; // 0-1 è¡¨ç¤ºä½ç½®æ¯”ä¾‹
        let currentDistance = 0; // å·²è¡Œé©¶è·ç¦»(km)
        let currentTime = 0; // å·²ç”¨æ—¶é—´(å°æ—¶)
        let timeRate = 2000; // æ—¶é—´å€ç‡ï¼Œé»˜è®¤2000å€
        let showFormula = false; // æ˜¯å¦æ˜¾ç¤ºæ•°å­¦å…³ç³»

        // å±±å¡è·¯å¾„å‚æ•°
        const pathStartX = 100;
        const pathPeakX = 500;
        const pathEndX = 900;
        const pathStartY = 200;
        const pathPeakY = 50;
        const pathEndY = 200;

        // æ›´æ–°æ»‘å—æ˜¾ç¤ºå€¼
        function updateSliderValues() {
            uphillSpeedValue.textContent = uphillSpeedSlider.value;
            downhillSpeedValue.textContent = downhillSpeedSlider.value;
            uphillDistanceValue.textContent = uphillDistanceSlider.value;
            downhillDistanceValue.textContent = downhillDistanceSlider.value;
            timeRateValue.textContent = `${timeRateSlider.value}x`;
            timeRate = parseInt(timeRateSlider.value);
        }

        // åˆå§‹åŒ–æ»‘å—å€¼
        updateSliderValues();

        // è®¾ç½®æ—¶é—´å€ç‡é»˜è®¤å€¼ä¸º2000
        timeRateSlider.value = 2000;
        timeRate = 2000;
        timeRateValue.textContent = '2000x';

        // å¯æŠ˜å åŒºåŸŸå±•å¼€/æ”¶èµ·
        let isDistanceExpanded = false;
        distanceHeader.addEventListener('click', function () {
            isDistanceExpanded = !isDistanceExpanded;
            if (isDistanceExpanded) {
                distanceContent.classList.add('expanded');
                distanceIcon.textContent = 'â–²';
            } else {
                distanceContent.classList.remove('expanded');
                distanceIcon.textContent = 'â–¼';
            }
        });

        // é¢„è®¾æŒ‰é’®äº‹ä»¶
        presetAtoB.addEventListener('click', function () {
            presetAtoB.classList.add('active');
            presetBtoA.classList.remove('active');
            // ç”²åˆ°ä¹™ï¼šä¸Šå¡è·ç¦»x=70ï¼Œä¸‹å¡è·ç¦»y=84
            uphillDistanceSlider.value = 70;
            downhillDistanceSlider.value = 84;
                updateSliderValues();
            // é‡ç½®åŠ¨ç”»ä½ç½®
            currentPosition = 0;
            updateCarPosition();
            if (showFormula) updateDiagram();
        });

        presetBtoA.addEventListener('click', function () {
            presetBtoA.classList.add('active');
            presetAtoB.classList.remove('active');
            // ä¹™åˆ°ç”²ï¼šä¸Šå¡è·ç¦»y=84ï¼ˆåŸæ¥çš„ä¸‹å¡ï¼‰ï¼Œä¸‹å¡è·ç¦»x=70ï¼ˆåŸæ¥çš„ä¸Šå¡ï¼‰
            uphillDistanceSlider.value = 84;
            downhillDistanceSlider.value = 70;
            updateSliderValues();
            // é‡ç½®åŠ¨ç”»ä½ç½®ï¼ˆä»å³å¾€å·¦ï¼Œæ‰€ä»¥ä½ç½®ä»1å¼€å§‹ï¼‰
            currentPosition = 1;
            updateCarPosition();
            if (showFormula) updateDiagram();
        });

        // æ»‘å—äº‹ä»¶ç›‘å¬
        uphillSpeedSlider.addEventListener('input', function () {
            updateSliderValues();
            if (showFormula) updateDiagram();
        });
        downhillSpeedSlider.addEventListener('input', function () {
            updateSliderValues();
            if (showFormula) updateDiagram();
        });
        uphillDistanceSlider.addEventListener('input', function () {
            updateSliderValues();
            if (showFormula) updateDiagram();
        });
        downhillDistanceSlider.addEventListener('input', function () {
            updateSliderValues();
            if (showFormula) updateDiagram();
        });
        timeRateSlider.addEventListener('input', function () {
            updateSliderValues();
        });

        // æ˜¾ç¤ºæ•°å­¦å…³ç³»æŒ‰é’®
        showFormulaBtn.addEventListener('click', function () {
            showFormula = !showFormula;
            this.textContent = showFormula ? "éšè—æ•°å­¦å…³ç³»" : "æ˜¾ç¤ºæ•°å­¦å…³ç³»";
            updateDiagram();
        });

        // è·å–å½“å‰é€Ÿåº¦(åŸºäºä½ç½®)
        function getCurrentSpeed(position) {
            const totalDistance = parseFloat(uphillDistanceSlider.value) + parseFloat(downhillDistanceSlider.value);
            const uphillRatio = parseFloat(uphillDistanceSlider.value) / totalDistance;

            // è·å–å½“å‰é¢„è®¾æ–¹å‘
            const currentPreset = document.querySelector('.preset-btn.active')?.getAttribute('data-preset') || 'atob';
            const isBtoA = currentPreset === 'btoa';

            let actualPosition = position;
            if (isBtoA) {
                // ä»å³å¾€å·¦ï¼šåè½¬ä½ç½®
                actualPosition = 1 - position;
            }

            if (actualPosition <= uphillRatio) {
                // ä¸Šå¡æ®µ
                return parseFloat(uphillSpeedSlider.value);
            } else {
                // ä¸‹å¡æ®µ
                return parseFloat(downhillSpeedSlider.value);
            }
        }


        // æ›´æ–°ä¿¡æ¯é¢æ¿
        function updateInfoPanel(position, distance, time) {
            const totalDistance = parseFloat(uphillDistanceSlider.value) + parseFloat(downhillDistanceSlider.value);
            const uphillRatio = parseFloat(uphillDistanceSlider.value) / totalDistance;

            // è·å–å½“å‰é¢„è®¾æ–¹å‘
            const currentPreset = document.querySelector('.preset-btn.active')?.getAttribute('data-preset') || 'atob';
            const isBtoA = currentPreset === 'btoa';

            let actualPosition = position;
            if (isBtoA) {
                // ä»å³å¾€å·¦ï¼šåè½¬ä½ç½®
                actualPosition = 1 - position;
            }

            // æ›´æ–°ä½ç½®
            if (position < 0.01 || position > 0.99) {
                if (isBtoA) {
                    positionElement.textContent = position < 0.01 ? "ç»ˆç‚¹(ç”²åœ°)" : "èµ·ç‚¹(ä¹™åœ°)";
                } else {
                    positionElement.textContent = position < 0.01 ? "èµ·ç‚¹(ç”²åœ°)" : "ç»ˆç‚¹(ä¹™åœ°)";
                }
            } else if (actualPosition <= uphillRatio) {
                positionElement.textContent = "ä¸Šå¡ä¸­";
            } else {
                positionElement.textContent = "ä¸‹å¡ä¸­";
            }

            // æ›´æ–°é€Ÿåº¦
            speedElement.textContent = `${getCurrentSpeed(position)} km/h`;

            // æ›´æ–°æ—¶é—´å’Œè·ç¦»
            timeElement.textContent = `${time.toFixed(2)} å°æ—¶`;
            distanceElement.textContent = `${distance.toFixed(1)} km`;
        }

        // æ›´æ–°æ•°å­¦å…³ç³»æ˜¾ç¤º
        function updateDiagram() {
            // æ¸…é™¤ç°æœ‰å†…å®¹
            diagramOverlay.innerHTML = '';

            if (!showFormula) return;

            const svgNS = "http://www.w3.org/2000/svg";
            const uphillDist = parseFloat(uphillDistanceSlider.value);
            const downhillDist = parseFloat(downhillDistanceSlider.value);
            const uphillSpeed = parseFloat(uphillSpeedSlider.value);
            const downhillSpeed = parseFloat(downhillSpeedSlider.value);

            // è®¡ç®—ä¸Šå¡å’Œä¸‹å¡çš„æ—¶é—´
            const uphillTime = uphillDist / uphillSpeed;
            const downhillTime = downhillDist / downhillSpeed;
            const totalTime = uphillTime + downhillTime;

            // æ ¹æ®å½“å‰é¢„è®¾ç¡®å®šæ–¹å‘
            const currentPreset = document.querySelector('.preset-btn.active')?.getAttribute('data-preset') || 'atob';
            const isBtoA = currentPreset === 'btoa';

            // ä¸Šå¡æ®µå…¬å¼æ˜¾ç¤º
            let uphillMidX, uphillMidY;
            if (isBtoA) {
                // ä¹™åˆ°ç”²ï¼šä¸Šå¡åœ¨å³ä¾§ï¼ˆä»å³å¾€å·¦ï¼‰
                uphillMidX = (pathPeakX + pathEndX) / 2;
                uphillMidY = (pathPeakY + pathEndY) / 2;
            } else {
                // ç”²åˆ°ä¹™ï¼šä¸Šå¡åœ¨å·¦ä¾§ï¼ˆä»å·¦å¾€å³ï¼‰
                uphillMidX = (pathStartX + pathPeakX) / 2;
                uphillMidY = (pathStartY + pathPeakY) / 2;
            }

            // ä¸Šå¡å…¬å¼èƒŒæ™¯
            const uphillBg = document.createElementNS(svgNS, "rect");
            uphillBg.setAttribute("class", "formula-background");
            uphillBg.setAttribute("x", uphillMidX - 140);
            uphillBg.setAttribute("y", uphillMidY - 35);
            uphillBg.setAttribute("width", "280");
            uphillBg.setAttribute("height", "70");
            diagramOverlay.appendChild(uphillBg);

            // ä¸Šå¡å…¬å¼æ–‡æœ¬
            const uphillFormula = document.createElementNS(svgNS, "text");
            uphillFormula.setAttribute("class", "formula-text");
            uphillFormula.setAttribute("x", uphillMidX);
            uphillFormula.setAttribute("y", uphillMidY - 10);
            uphillFormula.setAttribute("text-anchor", "middle");
            uphillFormula.setAttribute("font-size", "18px");
            if (isBtoA) {
                uphillFormula.textContent = `ä¸Šå¡æ—¶é—´: tâ‚ = y/${uphillSpeed}`;
            } else {
                uphillFormula.textContent = `ä¸Šå¡æ—¶é—´: tâ‚ = x/${uphillSpeed}`;
            }
            diagramOverlay.appendChild(uphillFormula);

            const uphillFormula2 = document.createElementNS(svgNS, "text");
            uphillFormula2.setAttribute("class", "formula-text");
            uphillFormula2.setAttribute("x", uphillMidX);
            uphillFormula2.setAttribute("y", uphillMidY + 15);
            uphillFormula2.setAttribute("text-anchor", "middle");
            uphillFormula2.setAttribute("font-size", "16px");
            if (isBtoA) {
                uphillFormula2.textContent = `ä¸Šå¡è·ç¦»: y (æœªçŸ¥)`;
            } else {
                uphillFormula2.textContent = `ä¸Šå¡è·ç¦»: x (æœªçŸ¥)`;
            }
            diagramOverlay.appendChild(uphillFormula2);

            // ä¸‹å¡æ®µå…¬å¼æ˜¾ç¤º
            let downhillMidX, downhillMidY;
            if (isBtoA) {
                // ä¹™åˆ°ç”²ï¼šä¸‹å¡åœ¨å·¦ä¾§ï¼ˆä»å³å¾€å·¦ï¼‰
                downhillMidX = (pathStartX + pathPeakX) / 2;
                downhillMidY = (pathStartY + pathPeakY) / 2;
            } else {
                // ç”²åˆ°ä¹™ï¼šä¸‹å¡åœ¨å³ä¾§ï¼ˆä»å·¦å¾€å³ï¼‰
                downhillMidX = (pathPeakX + pathEndX) / 2;
                downhillMidY = (pathPeakY + pathEndY) / 2;
            }

            // ä¸‹å¡å…¬å¼èƒŒæ™¯
            const downhillBg = document.createElementNS(svgNS, "rect");
            downhillBg.setAttribute("class", "formula-background");
            downhillBg.setAttribute("x", downhillMidX - 140);
            downhillBg.setAttribute("y", downhillMidY - 35);
            downhillBg.setAttribute("width", "280");
            downhillBg.setAttribute("height", "70");
            diagramOverlay.appendChild(downhillBg);

            // ä¸‹å¡å…¬å¼æ–‡æœ¬
            const downhillFormula = document.createElementNS(svgNS, "text");
            downhillFormula.setAttribute("class", "formula-text");
            downhillFormula.setAttribute("x", downhillMidX);
            downhillFormula.setAttribute("y", downhillMidY - 10);
            downhillFormula.setAttribute("text-anchor", "middle");
            downhillFormula.setAttribute("font-size", "18px");
            if (isBtoA) {
                downhillFormula.textContent = `ä¸‹å¡æ—¶é—´: tâ‚‚ = x/${downhillSpeed}`;
            } else {
                downhillFormula.textContent = `ä¸‹å¡æ—¶é—´: tâ‚‚ = y/${downhillSpeed}`;
            }
            diagramOverlay.appendChild(downhillFormula);

            const downhillFormula2 = document.createElementNS(svgNS, "text");
            downhillFormula2.setAttribute("class", "formula-text");
            downhillFormula2.setAttribute("x", downhillMidX);
            downhillFormula2.setAttribute("y", downhillMidY + 15);
            downhillFormula2.setAttribute("text-anchor", "middle");
            downhillFormula2.setAttribute("font-size", "16px");
            if (isBtoA) {
                downhillFormula2.textContent = `ä¸‹å¡è·ç¦»: x (æœªçŸ¥)`;
            } else {
                downhillFormula2.textContent = `ä¸‹å¡è·ç¦»: y (æœªçŸ¥)`;
            }
            diagramOverlay.appendChild(downhillFormula2);

            // æ€»æ—¶é—´å…¬å¼æ˜¾ç¤ºåœ¨é¡¶éƒ¨
            const totalFormulaBg = document.createElementNS(svgNS, "rect");
            totalFormulaBg.setAttribute("class", "formula-background");
            totalFormulaBg.setAttribute("x", pathPeakX - 200);
            totalFormulaBg.setAttribute("y", pathPeakY - 50);
            totalFormulaBg.setAttribute("width", "400");
            totalFormulaBg.setAttribute("height", "80");
            diagramOverlay.appendChild(totalFormulaBg);

            // æ ¹æ®å½“å‰é¢„è®¾æ˜¾ç¤ºä¸åŒçš„æ€»æ—¶é—´å…¬å¼
            let totalTimeFormula = '';
            let formulaY = pathPeakY - 15;

            if (isBtoA) {
                // ä¹™åˆ°ç”²ï¼šy/28 + x/42 = 14/3
                totalTimeFormula = `ä»ä¹™åˆ°ç”²: tâ‚ + tâ‚‚ = y/${uphillSpeed} + x/${downhillSpeed} = 14/3`;
            } else {
                // ç”²åˆ°ä¹™ï¼šx/28 + y/42 = 4.5
                totalTimeFormula = `ä»ç”²åˆ°ä¹™: tâ‚ + tâ‚‚ = x/${uphillSpeed} + y/${downhillSpeed} = 4.5`;
            }

            const totalFormula = document.createElementNS(svgNS, "text");
            totalFormula.setAttribute("class", "formula-text");
            totalFormula.setAttribute("x", pathPeakX);
            totalFormula.setAttribute("y", formulaY);
            totalFormula.setAttribute("text-anchor", "middle");
            totalFormula.setAttribute("font-size", "16px");
            totalFormula.textContent = totalTimeFormula;
            diagramOverlay.appendChild(totalFormula);

            // æ·»åŠ è¯´æ˜æ–‡å­—
            const noteText = document.createElementNS(svgNS, "text");
            noteText.setAttribute("class", "formula-text");
            noteText.setAttribute("x", pathPeakX);
            noteText.setAttribute("y", formulaY + 20);
            noteText.setAttribute("text-anchor", "middle");
            noteText.setAttribute("font-size", "13px");
            noteText.setAttribute("fill", "#666");
            noteText.textContent = "æ³¨ï¼šxå’Œyæ˜¯æœªçŸ¥æ•°ï¼Œéœ€è¦é€šè¿‡æ–¹ç¨‹ç»„æ±‚è§£";
            diagramOverlay.appendChild(noteText);
        }

        // åŠ¨ç”»å‡½æ•°
        function animate(timestamp) {
            if (!lastTimestamp) lastTimestamp = timestamp;

            const elapsedSeconds = (timestamp - lastTimestamp) / 1000;
            lastTimestamp = timestamp;

            if (isAnimating && !isPaused) {
                // è·å–å½“å‰é¢„è®¾æ–¹å‘
                const currentPreset = document.querySelector('.preset-btn.active')?.getAttribute('data-preset') || 'atob';
                const isBtoA = currentPreset === 'btoa';

                // è®¡ç®—å½“å‰é€Ÿåº¦
                const currentSpeed = getCurrentSpeed(currentPosition);

                // è®¡ç®—ç§»åŠ¨çš„è·ç¦»(km)ï¼Œåº”ç”¨æ—¶é—´å€ç‡
                const distanceIncrement = (currentSpeed * elapsedSeconds * timeRate) / 3600;

                // æ›´æ–°ä½ç½®
                const totalDistance = parseFloat(uphillDistanceSlider.value) + parseFloat(downhillDistanceSlider.value);

                if (isBtoA) {
                    // ä»å³å¾€å·¦ï¼šä½ç½®é€’å‡
                    currentPosition -= distanceIncrement / totalDistance;
                    if (currentPosition <= 0) {
                        currentPosition = 0;
                        isAnimating = false;
                        startBtn.disabled = false;
                        pauseBtn.disabled = true;
                        pauseBtn.textContent = "æš‚åœ";
                        isPaused = false;
                    }
                } else {
                    // ä»å·¦å¾€å³ï¼šä½ç½®é€’å¢
                    currentPosition += distanceIncrement / totalDistance;
                if (currentPosition >= 1) {
                    currentPosition = 1;
                    isAnimating = false;
                    startBtn.disabled = false;
                    pauseBtn.disabled = true;
                    pauseBtn.textContent = "æš‚åœ";
                    isPaused = false;
                    }
                }

                currentDistance += distanceIncrement;
                currentTime += (elapsedSeconds * timeRate) / 3600;

                // æ›´æ–°æ±½è½¦ä½ç½®å’Œè§’åº¦
                updateCarPosition();

                // æ›´æ–°ä¿¡æ¯é¢æ¿
                updateInfoPanel(currentPosition, currentDistance, currentTime);

                // æ›´æ–°æ•°å­¦å…³ç³»æ˜¾ç¤º
                updateDiagram();
            }

            // ç»§ç»­åŠ¨ç”»
            if (isAnimating) {
                animationId = requestAnimationFrame(animate);
            }
        }

        // æ›´æ–°æ±½è½¦ä½ç½®å’Œè§’åº¦
        function updateCarPosition() {
            const hillScene = document.querySelector('.hill-scene');
            const hillWidth = hillScene.offsetWidth;
            const hillHeight = hillScene.offsetHeight;

            // è·å–å½“å‰é¢„è®¾æ–¹å‘
            const currentPreset = document.querySelector('.preset-btn.active')?.getAttribute('data-preset') || 'atob';
            const isBtoA = currentPreset === 'btoa';

            // è®¡ç®—å½“å‰ç‚¹åœ¨è·¯å¾„ä¸Šçš„ä½ç½®
            const totalDistance = parseFloat(uphillDistanceSlider.value) + parseFloat(downhillDistanceSlider.value);
            const uphillRatio = parseFloat(uphillDistanceSlider.value) / totalDistance;

            let pointX, pointY;
            let actualPosition = currentPosition;

            if (isBtoA) {
                // ä»å³å¾€å·¦ï¼šåè½¬ä½ç½®
                actualPosition = 1 - currentPosition;
            }

            if (actualPosition <= uphillRatio) {
                // ä¸Šå¡æ®µ
                const progress = actualPosition / uphillRatio;
                if (isBtoA) {
                    // ä»å³å¾€å·¦ï¼šä»ç»ˆç‚¹åˆ°èµ·ç‚¹
                    pointX = pathEndX - (pathEndX - pathPeakX) * progress;
                    pointY = pathEndY - (pathEndY - pathPeakY) * progress;
                } else {
                    // ä»å·¦å¾€å³ï¼šä»èµ·ç‚¹åˆ°é¡¶ç‚¹
                pointX = pathStartX + (pathPeakX - pathStartX) * progress;
                pointY = pathStartY + (pathPeakY - pathStartY) * progress;
                }
            } else {
                // ä¸‹å¡æ®µ
                const progress = (actualPosition - uphillRatio) / (1 - uphillRatio);
                if (isBtoA) {
                    // ä»å³å¾€å·¦ï¼šä»é¡¶ç‚¹åˆ°èµ·ç‚¹
                    pointX = pathPeakX - (pathPeakX - pathStartX) * progress;
                    pointY = pathPeakY - (pathPeakY - pathStartY) * progress;
                } else {
                    // ä»å·¦å¾€å³ï¼šä»é¡¶ç‚¹åˆ°ç»ˆç‚¹
                pointX = pathPeakX + (pathEndX - pathPeakX) * progress;
                pointY = pathPeakY + (pathEndY - pathPeakY) * progress;
                }
            }

            // è®¡ç®—æ–œç‡/è§’åº¦
            let slope, angle;

            if (actualPosition <= uphillRatio) {
                // ä¸Šå¡æ®µ
                if (isBtoA) {
                    // ä»å³å¾€å·¦ï¼šè®¡ç®—ä»ç»ˆç‚¹åˆ°é¡¶ç‚¹çš„æ–œç‡ï¼ˆæ–¹å‘ç›¸åï¼‰
                    slope = (pathPeakY - pathEndY) / (pathPeakX - pathEndX);
                } else {
                slope = (pathPeakY - pathStartY) / (pathPeakX - pathStartX);
                }
            } else {
                // ä¸‹å¡æ®µ
                if (isBtoA) {
                    // ä»å³å¾€å·¦ï¼šè®¡ç®—ä»é¡¶ç‚¹åˆ°èµ·ç‚¹çš„æ–œç‡ï¼ˆæ–¹å‘ç›¸åï¼‰
                    slope = (pathStartY - pathPeakY) / (pathStartX - pathPeakX);
                } else {
                slope = (pathEndY - pathPeakY) / (pathEndX - pathPeakX);
                }
            }

            angle = Math.atan(slope) * 180 / Math.PI;

            // ä»å³å¾€å·¦æ—¶ï¼Œæ°´å¹³ç¿»è½¬æ±½è½¦ï¼Œè€Œä¸æ˜¯æ—‹è½¬180åº¦
            let transform = `rotate(${angle}deg)`;
            if (isBtoA) {
                transform += ` scaleX(-1)`;
            }

            // æ›´æ–°æ±½è½¦ä½ç½®å’Œæ—‹è½¬
            // å°†SVGåæ ‡è½¬æ¢ä¸ºåƒç´ åæ ‡
            const carX = (pointX / 1000) * hillWidth - 40; // å‡å»æ±½è½¦å®½åº¦çš„ä¸€åŠä½¿å…¶å±…ä¸­
            const carY = (pointY / 200) * (hillHeight * 0.7) - 20; // è°ƒæ•´Yåæ ‡è®¡ç®—

            car.style.left = `${carX}px`;
            car.style.top = `${carY}px`;
            car.style.transform = transform;
        }

// åˆå§‹åŒ–æ±½è½¦ä½ç½®
        function initializeCarPosition() {
            const hillScene = document.querySelector('.hill-scene');
            const hillWidth = hillScene.offsetWidth;
            const hillHeight = hillScene.offsetHeight;

            // è®¾ç½®åˆå§‹ä½ç½®åœ¨èµ·ç‚¹
            const startX = (pathStartX / 1000) * hillWidth - 40;
            const startY = (pathStartY / 200) * (hillHeight * 0.7) - 20;

            car.style.left = `${startX}px`;
            car.style.top = `${startY}px`;
            car.style.transform = 'rotate(0deg)';
        }

        // å¼€å§‹åŠ¨ç”»
        startBtn.addEventListener('click', function () {
            if (!isAnimating) {
                isAnimating = true;
                isPaused = false;
                lastTimestamp = 0;
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                animationId = requestAnimationFrame(animate);
            }
        });

        // æš‚åœ/ç»§ç»­åŠ¨ç”»
        pauseBtn.addEventListener('click', function () {
            if (isAnimating) {
                if (isPaused) {
                    // ç»§ç»­åŠ¨ç”»
                    isPaused = false;
                    pauseBtn.textContent = "æš‚åœ";
                    lastTimestamp = 0;
                    animationId = requestAnimationFrame(animate);
                } else {
                    // æš‚åœåŠ¨ç”»
                    isPaused = true;
                    pauseBtn.textContent = "ç»§ç»­";
                }
            }
        });

        // é‡ç½®åŠ¨ç”»
        resetBtn.addEventListener('click', function () {
            isAnimating = false;
            isPaused = false;
            currentDistance = 0;
            currentTime = 0;

            // æ ¹æ®å½“å‰é¢„è®¾è®¾ç½®åˆå§‹ä½ç½®
            const currentPreset = document.querySelector('.preset-btn.active')?.getAttribute('data-preset') || 'atob';
            if (currentPreset === 'btoa') {
                currentPosition = 1; // ä»å³å¾€å·¦ï¼Œä»1å¼€å§‹
            } else {
                currentPosition = 0; // ä»å·¦å¾€å³ï¼Œä»0å¼€å§‹
            }

            cancelAnimationFrame(animationId);

            // é‡ç½®æ±½è½¦ä½ç½®
            updateCarPosition();

            // é‡ç½®ä¿¡æ¯é¢æ¿
            updateInfoPanel(currentPosition, 0, 0);

            // æ›´æ–°æ•°å­¦å…³ç³»æ˜¾ç¤º
            updateDiagram();

            // é‡ç½®æŒ‰é’®çŠ¶æ€
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            pauseBtn.textContent = "æš‚åœ";
        });

        // åˆå§‹åŒ–ä¿¡æ¯é¢æ¿
        updateInfoPanel(0, 0, 0);
        updateCarPosition();
        updateDiagram();

        // æ¸²æŸ“æ•°å­¦å…¬å¼
        if (typeof renderMathInElement !== 'undefined') {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '\\(', right: '\\)', display: false},
                    {left: '\\[', right: '\\]', display: true}
                ]
            });
        }
    });
</script>
</body>
</html>